%--------------------------------------------------------------------------
function f =Performance(x)
%--------------------------------------------------------------------------
global px py teta f1 f2
%--------------------------------------------------------------------------
ro1=x(1); ro2=x(2); ro3=x(3);
%--------------------------------------------------------------------------
R=[cos(teta) -sin(teta);sin(teta) cos(teta)];
E=[0 -1;1 0];

gama=[0, 2*pi/3, 4*pi/3];
Z1=[cos(gama(1)) -sin(gama(1));sin(gama(1)) cos(gama(1))];
Z2=[cos(gama(2)) -sin(gama(2));sin(gama(2)) cos(gama(2))];
Z3=[cos(gama(3)) -sin(gama(3));sin(gama(3)) cos(gama(3))];
%--------------------------------------------------------------------------
up1=Z1*eye(2,1)*ro1;
up2=Z2*eye(2,1)*ro2;
up3=Z3*eye(2,1)*ro3;

rp1=[px;py]+R*up1;
rp2=[px;py]+R*up2;
rp3=[px;py]+R*up3;
%--------------------------------------------------------------------------
b=.6;

rb1=Z1*eye(2,1)*b;
rb2=Z2*eye(2,1)*b;
rb3=Z3*eye(2,1)*b;
%--------------------------------------------------------------------------
d1=norm(rp1-rb1); s1=(rp1-rb1)/d1;
d2=norm(rp2-rb2); s2=(rp2-rb2)/d2;
d3=norm(rp3-rb3); s3=(rp3-rb3)/d3;

teta1=atan2(s1(2),s1(1));
teta2=atan2(s2(2),s2(1));
teta3=atan2(s3(2),s3(1));

s1_tilde=[-sin(teta1) cos(teta1)];
s2_tilde=[-sin(teta2) cos(teta2)];
s3_tilde=[-sin(teta3) cos(teta3)];
%--------------------------------------------------------------------------
alpha1=s1'*R*Z1*eye(2,1);
alpha2=s2'*R*Z2*eye(2,1);
alpha3=s3'*R*Z3*eye(2,1);
beta1=s1_tilde*R*Z1*eye(2,1);
beta2=s2_tilde*R*Z2*eye(2,1);
beta3=s3_tilde*R*Z3*eye(2,1);
%--------------------------------------------------------------------------
Jx(1,:)=(s1'/alpha1-s1_tilde/beta1)*[eye(2) E*R*up1];
Jx(2,:)=(s2'/alpha2-s2_tilde/beta2)*[eye(2) E*R*up2];
Jx(3,:)=(s3'/alpha3-s3_tilde/beta3)*[eye(2) E*R*up3];

Jq(1,:)=[1/alpha1 0 0 -d1/beta1 0  0];
Jq(2,:)=[0  1/alpha2 0 0 -d2/beta2 0];
Jq(3,:)=[0 0  1/alpha3 0 0 -d3/beta3];
%--------------------------------------------------------------------------
f1=1/cond(Jx);
f2=1/cond(Jq);
f=cond(Jx);
end
%--------------------------------------------------------------------------